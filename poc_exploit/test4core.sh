#!/bin/bash

COUNTER=0
echo "### 4 cores and 1 attacker thread" >> out1126.txt
	
for i in {1..2000}; do
	rm firefox_out2.txt
	pkill -9 firefox

	for i in `seq 0 0`; do
		#( timeout -k 60 60 taskset -c $i ../../firefox-106.0.1/objdir/dist/firefox/firefox kaizen.html --no-remote -P profile$i $* &>> firefox_out.txt ) &
		( timeout -k 18 18  taskset -c 0,1,2,3 ../firefox-106.0.1/objdir/dist/firefox/firefox warpattack1a.html --no-remote -P profile$i $* &>> firefox_out2.txt ) &
	done
	wait

	cat firefox_out2.txt >> out1126.txt

	COUNTER=$(( COUNTER + 1 ))

	printf "Trial %d\n" $COUNTER
	grep "stack smashing" firefox_out2.txt
done;

